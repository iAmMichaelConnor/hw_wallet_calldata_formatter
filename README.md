# hw_wallet_calldata_formatter

Convert a big Ethereum calldata hex string into a format which matches the layout shown on your hardware wallet's screen.

Do you need to sign something on your hardware wallet?

But your human brain can't reconcile the big blob of calldata shown on your laptop's screen against the weird format shown on your hardware wallet's screen?

This tool might help.

Input: a calldata hex string.  

Output: the same calldata, but now encoded exactly as it should appear on your hardware wallet's screen.  

If the output doesn't match what's showing on your hw wallet's screen, something is amiss.

## Current hw wallets supported:

- Ledger Flex
- Trezor Safe 5

**Feel free to open PRs with other formats :)**

---

## Disclaimer

This is experimental software. It has not been audited. It doesn't even contain tests.
This software might contain critical bugs. You could lose all your funds if you use this software.
Do not rely on this software.

---

## ðŸ›  Installation

```
npm install -g hw_wallet_calldata_formatter
```

```sh
which hw_wallet_calldata_formatter
```

---

## ðŸš€ Usage

```sh
hw_wallet_calldata_formatter <calldata hex string> [options]
```

### Options

- `--lf, --ledger-flex` Format output for **Ledger Flex**
- `--ts5, --trezor-safe-5` Format output for **Trezor Safe 5**

You can use one or both flags.

### Examples

```sh
hw_wallet_calldata_formatter 0x6a761202000000000000000000000000A0b86991c6218b36c1d19D4a2e9Eb0cE3606eB480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000044a9059cbb0000000000000000000000003253ea053090adca994cbd4291e6834206ab40f90000000000000000000000000000000000000000000000000000000000002710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 --ledger-flex
```

Outputs:

```sh
Ledger Flex Format:

6a761202
00:A0b86991:c6218b36c1d19D4a:2e9Eb0cE3606eB48
00:00:00:00
00:00:00:120
00:00:00:00
00:00:00:00
00:00:00:00
00:00:00:00
00:00:00:00
00:00:00:00
00:00:00:1a0
00:00:00:44
a9059cbb00000000:00:3253ea053090adca:994cbd4291e68342
6ab40f900000000:00:00:00
271000000000:00:00:00
00:00:00:00
```

```sh
hw_wallet_calldata_formatter 0x6a761202000000000000000000000000A0b86991c6218b36c1d19D4a2e9Eb0cE3606eB480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000044a9059cbb0000000000000000000000003253ea053090adca994cbd4291e6834206ab40f90000000000000000000000000000000000000000000000000000000000002710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 --trezor-safe-5
```

```sh
Trezor Format:

Size: 484 bytes

Page 1:

6a7612020000000000
00000000000000A0b8
6991c6218b36c1d19D
4a2e9Eb0cE3606eB48
000000000000000000
00000000000000

Page 2:

00000000000000
000000000000000000
000000000000000000
000000000000000000
000000000000000000
00000001200000

Page 3:

00000000000000
000000000000000000
000000000000000000
000000000000000000
000000000000000000
00000000000000

Page 4:

00000000000000
000000000000000000
000000000000000000
000000000000000000
000000000000000000
00000000000000

Page 5:

00000000000000
000000000000000000
000000000000000000
000000000000000000
000000000000000000
00000000000000

Page 6:

00000000000000
000000000000000000
000000000000000000
000000000000000000
000000000000000000
00000000000000

Page 7:

00000000000000
000000000000000000
0000000001a0000000
000000000000000000
000000000000000000
00000000000000

Page 8:

00000044a9059c
bb0000000000000000
000000003253ea0530
90adca994cbd4291e6
834206ab40f9000000
00000000000000

Page 9:

00000000000000
000000000000000000
000000002710000000
000000000000000000
000000000000000000
00000000000000

Page 10:

00000000000000
000000000000000000
000000000000000000
00000000000000
```

### ðŸ§¾ Notes

- The hex string may start with or without `0x`
- Output is printed to `stdout`
- Invalid or odd-length hex strings will throw an error

---

## Contributing

Clonse the repo:
```sh
git clone https://github.com/iAmMichaelConnor/hw_wallet_calldata_formatter.git
```

```sh
cd hw_wallet_calldata_formatter
```

Install dependencies
```sh
npm i
```

Then add it to your bin, so that you can use it as a command line tool:
```sh
npm i -g
```

To verify installation:

```sh
which hw_wallet_calldata_formatter
```